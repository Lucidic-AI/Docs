---
title: 'init / sessions.create'
description: 'Initialize a Lucidic client and create sessions'
---

## Overview

The Lucidic Python SDK uses a client-based initialization pattern. First, create a `LucidicAI` client, then use `client.sessions.create()` to start tracking sessions.

## Client Initialization

```python
from lucidicai import LucidicAI

client = LucidicAI(
    api_key: Optional[str] = None,
    agent_id: Optional[str] = None,
    providers: Optional[List[ProviderType]] = [],
    production_monitoring: Optional[bool] = False,
)
```

### Client Parameters

<ParamField path="api_key" type="string" optional>
  Your Lucidic API key for authentication. If not provided, the SDK will use the `LUCIDIC_API_KEY` environment variable.
</ParamField>

<ParamField path="agent_id" type="string" optional>
  Your agent identifier. If not provided, the SDK will use the `LUCIDIC_AGENT_ID` environment variable.
</ParamField>

<ParamField path="providers" type="List[ProviderType]" optional default="[]">
  List of LLM providers to automatically instrument. Supported values: `"openai"`, `"anthropic"`, `"langchain"`, `"pydantic_ai"`, `"openai_agents"`, `"litellm"`.
</ParamField>

<ParamField path="production_monitoring" type="boolean" optional default="False">
  Flag to enable production monitoring mode. When enabled, sessions appear in the Production Monitoring dashboard. Can also be set via `LUCIDIC_PRODUCTION_MONITORING` environment variable. See [Production Monitoring](/feature-overview/production-monitoring) for details.
</ParamField>

## Session Creation

### Context Manager (Recommended)

```python
with client.sessions.create(
    session_name: Optional[str] = None,
    session_id: Optional[str] = None,
    task: Optional[str] = None,
    experiment_id: Optional[str] = None,
    dataset_item_id: Optional[str] = None,
    rubrics: Optional[list] = None,
    tags: Optional[list] = None,
    masking_function = None,
) as session:
    # Your workflow here
    # Session auto-ends when context exits
```

### Session Parameters

<ParamField path="session_name" type="string" optional>
  The display name for this session. Used for easy identification in the Lucidic dashboard.
</ParamField>

<ParamField path="session_id" type="string" optional>
  ID for the session. If not provided, a random ID will be generated. Use this to continue an existing session.
</ParamField>

<ParamField path="task" type="string" optional>
  A high-level description of the task or workflow being performed in this session.
</ParamField>

<ParamField path="experiment_id" type="string" optional>
  ID of an experiment to include this session in. Experiments must be created in the dashboard first. The experiment ID can be found in the experiment URL.
</ParamField>

<ParamField path="dataset_item_id" type="string" optional>
  ID of a dataset item being tested in this session. Links the session to a specific test case from a dataset. See [Working with Datasets](/python-sdk/datasets) for details.
</ParamField>

<ParamField path="rubrics" type="list" optional>
  List of evaluation criteria for this session. Used for automated evaluation workflows.
</ParamField>

<ParamField path="tags" type="list" optional>
  List of tags to categorize and filter sessions in the dashboard.
</ParamField>

<ParamField path="masking_function" type="callable" optional>
  Custom function to mask sensitive data before sending to Lucidic. Function should accept text and return masked text.
</ParamField>

## Returns

- **Client initialization**: Returns a `LucidicAI` client instance
- **Session creation**: Returns a session object with `session_id` property

## Authentication

### Setting up Credentials

You need to provide your Lucidic API key and Agent ID to use the SDK. There are several ways to do this:

#### Option 1: Environment Variables (Recommended)

Set these environment variables in your shell or `.env` file:

```bash
export LUCIDIC_API_KEY=your-api-key
export LUCIDIC_AGENT_ID=your-agent-id
```

Then initialize without passing credentials:

```python
from lucidicai import LucidicAI

client = LucidicAI(providers=["openai"])

with client.sessions.create(session_name="My Session"):
    # Your workflow
    pass
```

#### Option 2: Direct Parameters

Pass credentials directly to the client:

```python
from lucidicai import LucidicAI

client = LucidicAI(
    api_key="your-api-key",
    agent_id="your-agent-id",
    providers=["openai"]
)

with client.sessions.create(session_name="My Session"):
    # Your workflow
    pass
```

#### Option 3: Using python-dotenv

For local development, you can use a `.env` file:

```bash
# .env file
LUCIDIC_API_KEY=your-api-key
LUCIDIC_AGENT_ID=your-agent-id
```

```python
from dotenv import load_dotenv
from lucidicai import LucidicAI

load_dotenv()  # Load environment variables from .env file

client = LucidicAI(providers=["anthropic"])

with client.sessions.create(session_name="My Session"):
    # Your workflow
    pass
```

### Getting Your Credentials

1. Log in to the [Lucidic Dashboard](https://dashboard.lucidic.ai)
2. Navigate to your agent settings
3. Copy your API Key and Agent ID
4. Store them securely - never commit them to version control

### Security Best Practices

- **Never hardcode credentials** in your source code
- **Use environment variables** for production deployments
- **Add `.env` to `.gitignore`** if using dotenv
- **Rotate API keys regularly** for enhanced security
- **Use different keys** for development and production

## Examples

### Basic Usage

```python
from lucidicai import LucidicAI
from openai import OpenAI

# Initialize client
client = LucidicAI(providers=["openai"])
openai_client = OpenAI()

# Use context manager for session lifecycle
with client.sessions.create(session_name="AI Assistant"):
    # LLM calls are automatically tracked
    response = openai_client.chat.completions.create(
        model="gpt-4",
        messages=[{"role": "user", "content": "Hello!"}]
    )
# Session auto-ends when context exits
```

### With Multiple Providers

```python
from lucidicai import LucidicAI

client = LucidicAI(providers=["openai", "anthropic"])

with client.sessions.create(
    session_name="Multi-Provider Task",
    task="Compare responses from different LLMs"
):
    # Both OpenAI and Anthropic calls are tracked
    pass
```

### Production Configuration

```python
from lucidicai import LucidicAI

def mask_pii(text):
    # Custom logic to mask sensitive information
    return text.replace("SSN:", "XXX-XX-")

client = LucidicAI(
    providers=["openai"],
    production_monitoring=True  # Enables production monitoring dashboard
)

with client.sessions.create(
    session_name="Production Agent",
    masking_function=mask_pii,
    tags=["production", "v2.0", "customer-service"]
):
    # Your production workflow
    pass

# Sessions with production_monitoring=True will appear in the Production dashboard
# with metrics on cost, performance, errors, and more
```

### Dataset Testing

```python
from lucidicai import LucidicAI

client = LucidicAI(providers=["openai"])

# When running dataset tests, link sessions to dataset items
dataset_items = client.datasets.get_items(dataset_id="test_suite_v1")

for item in dataset_items:
    with client.sessions.create(
        session_name=f"Test: {item['name']}",
        dataset_item_id=item['id']  # Links to specific test case
    ):
        # Run your agent with the test input
        result = my_agent.process(item['input'])

        # Update session success based on result
        client.sessions.update(is_successful=result == item['expected_output'])
```

### Experiment Usage

```python
from lucidicai import LucidicAI

client = LucidicAI(providers=["openai"])

# Experiments must be created in the dashboard first
# The experiment ID can be found in the URL after creation
EXPERIMENT_ID = "exp-123abc-456def"

# Add sessions to the experiment
with client.sessions.create(
    session_name="Performance Test 1",
    experiment_id=EXPERIMENT_ID,
    task="Test checkout flow performance"
):
    # Your agent workflow here
    process_checkout()
```

### Continuing Existing Sessions

```python
from lucidicai import LucidicAI

client = LucidicAI(providers=["openai"])

# Continue a previous session by passing its ID
with client.sessions.create(session_id="existing-session-uuid"):
    # Add more events to the existing session
    client.events.emit(
        name="Resumed task",
        input={"action": "resume"},
        output={"status": "continuing"}
    )
```

## Manual Session Management

If you need more control, you can manage sessions manually:

```python
from lucidicai import LucidicAI

client = LucidicAI(providers=["openai"])

# Start session manually
session = client.sessions.create(session_name="Manual Session")
session_id = session.session_id

try:
    # Your workflow
    pass
finally:
    # End session explicitly
    client.sessions.end(
        is_successful=True,
        is_successful_reason="Task completed successfully"
    )
```

## Notes

- Either `api_key` or `LUCIDIC_API_KEY` environment variable must be set
- Either `agent_id` or `LUCIDIC_AGENT_ID` environment variable must be set
- Using context managers is recommended as they handle cleanup automatically
- Sessions can contain nested events (LLM calls, function calls, etc.)
- Provider instrumentation happens automatically once configured
- Session context is async/thread-safe for concurrent environments

## Error Handling

```python
from lucidicai import LucidicAI
from lucidicai.errors import APIKeyVerificationError, InvalidOperationError

try:
    client = LucidicAI(providers=["openai"])

    with client.sessions.create(session_name="My Session"):
        # Your workflow
        pass

except APIKeyVerificationError:
    print("Please set your LUCIDIC_API_KEY environment variable")
except InvalidOperationError:
    print("Something went wrong. Please double check IDs passed")
```

## See Also

- [Session Context](/python-sdk/session-context) - Async-safe context managers
- [Event Management](/python-sdk/events/index) - Creating and managing events
- [Decorators](/python-sdk/decorators) - Automatic function tracking
- [End Session](/python-sdk/end_session) - Session completion options
