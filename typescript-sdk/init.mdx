---
title: 'init'
description: 'Initialize the Lucidic SDK and optionally create a session'
---

## Overview

The `init` function initializes the Lucidic SDK with your credentials, configures providers, and optionally starts a new session. This must be called before any other SDK operations.

## Syntax

```typescript
await lai.init(params?: InitParams): Promise<string>
```

## Parameters

<ParamField path="params" type="InitParams" optional>
  Initialization object with the following properties:
  
  <Expandable title="properties">
    <ParamField path="apiKey" type="string" optional>
      Your Lucidic API key. If not provided, uses `LUCIDIC_API_KEY` environment variable.
    </ParamField>
    
    <ParamField path="agentId" type="string" optional>
      Your agent identifier. If not provided, uses `LUCIDIC_AGENT_ID` environment variable.
    </ParamField>
    
    <ParamField path="sessionName" type="string" optional>
      If provided, automatically creates a session with this name.
    </ParamField>
    
    <ParamField path="sessionId" type="string" optional>
      If provided, continues an existing session instead of creating a new one.
    </ParamField>
    
    <ParamField path="task" type="string" optional>
      High-level description of the task or workflow.
    </ParamField>
    
    <ParamField path="providers" type="string[]" optional>
      Providers to enable (OpenTelemetry instrumentation). Optional when using `instrumentModules`.
    </ParamField>
    
    <ParamField path="massSimId" type="string" optional>
      Optional mass simulation ID to associate the session with.
    </ParamField>
    
    <ParamField path="experimentId" type="string" optional>
      Optional experiment ID to associate the session with.
    </ParamField>
    
    <ParamField path="maskingFunction" type="(text: string) => string" optional>
      Custom function to mask sensitive data.
    </ParamField>
    
    <ParamField path="autoEnd" type="boolean" optional default="true">
      Automatically end session on process exit. Spans are flushed on exit even when `autoEnd` is false.
    </ParamField>

    <ParamField path="debug" type="boolean" optional default="false">
      Enable verbose SDK logging.
    </ParamField>
    
    <ParamField path="useSpanProcessor" type="boolean" optional>
      Force simple span processor (defaults to batch unless LUCIDIC_EXPORT_MODE indicates simple).
    </ParamField>
    
    <ParamField path="instrumentModules" type="Record<string, any>" optional>
      Manual module references for ESM/Next.js to ensure instrumentation (e.g., `{ OpenAI, Anthropic }`).
    </ParamField>
  </Expandable>
</ParamField>

## Returns

Returns a Promise that resolves to the session ID (string).

## Examples

### Basic Initialization

```typescript
import * as lai from 'lucidicai';

// Initialize with environment variables
await lai.init();
```

### With Session Creation

```typescript
import OpenAI from 'openai';
await lai.init({
  sessionName: "Customer Support Bot",
  instrumentModules: { OpenAI },
  task: "Answer customer questions"
});
const openai = new OpenAI({ apiKey: process.env.OPENAI_API_KEY });
```

### With Custom Configuration

```typescript
await lai.init({
  apiKey: "your-api-key",
  agentId: "your-agent-id",
  sessionName: "Production Agent",
  providers: ["openai", "anthropic"],
  maskingFunction: (text) => text.replace(/\b\d{3}-\d{2}-\d{4}\b/g, 'XXX-XX-XXXX'),
  debug: true
});
```

### Continue Existing Session

```typescript
import { Anthropic } from '@anthropic-ai/sdk';
await lai.init({
  sessionId: "existing-session-uuid",
  instrumentModules: { anthropic: Anthropic }
});
```

## Important Notes

### Provider Import Order

Preferred pattern: import providers and pass them via `instrumentModules`:

```typescript
// ✅ Preferred (ESM)
import OpenAI from 'openai';
await lai.init({ instrumentModules: { OpenAI } });

// ❌ WRONG - do not rely on providers array for ESM imports
await lai.init({ providers: ["openai"] }); // discouraged
import OpenAI from 'openai'; // importing after init may miss instrumentation
```

### Auto-End Behavior

When `autoEnd` is true (default), the SDK:
- Registers exit handlers for graceful shutdown
- Automatically ends active sessions on process exit
- Cleans up telemetry instrumentation

### Environment Variables

The SDK checks these environment variables if not provided in config:
- `LUCIDIC_API_KEY` - API key for authentication
- `LUCIDIC_AGENT_ID` - Agent identifier

## Error Handling

```typescript
try {
  await lai.init({
    sessionName: "My Session",
    providers: ["openai"]
  });
} catch (error) {
  if (error.message.includes('API key')) {
    console.error('Invalid API credentials');
  } else {
    console.error('Initialization failed:', error);
  }
}
```

## See Also

- [initSession](/typescript-sdk/init-session) - Create sessions explicitly
- [continueSession](/typescript-sdk/continue-session) - Continue existing sessions
- [Quick Start Guide](/typescript-sdk/quick-start) - Getting started tutorial